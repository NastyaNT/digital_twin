<?xml version="1.0"?>
<robot name="robot" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <xacro:include filename="$(find my_robot)/urdf/robot.gazebo" />

  <material name="gray">
    <color rgba="0.5 0.5 0.5 1"/>
  </material>

  <material name="white">
    <color rgba="1 1 1 1"/>
  </material>

  <material name="light_gray">
    <color rgba="0.8 0.8 0.8 1"/>
  </material>

  <material name="black">
    <color rgba="0 0 0 1"/>
  </material>



  <!-- base_link -->
  <link name="base_link">
   <inertial>
     <origin xyz="0 0 0.0625" rpy="0 0 0"/>
     <mass value="3"/>
     <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
   </inertial>

    <visual>
      <origin xyz="0 0 0.065" rpy="0 0 0"/>
      <geometry>
        <box size="0.42 0.3 0.13"/>
      </geometry>
      <material name="white"/>
    </visual>
    
    <collision>
      <origin xyz="0 0 0.0625" rpy="0 0 0"/>
      <geometry>
        <box size="0.42 0.3 0.13"/>
      </geometry>
    </collision>
  </link>


  <!-- Hokuyo Laser -->
  <link name="hokuyo_link">
    <collision>     
      <geometry>
        <box size="0.1 0.1 0.1"/>
      </geometry>
    </collision>

    <visual>
      <geometry>
        <mesh filename="package://my_robot/meshes/hokuyo.dae" scale="0.2 0.2 0.2"/>
      </geometry>
    </visual>

    <inertial>
      <mass value="1e-5" />
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
  </link>

  <joint name="hokuyo_joint" type="fixed">
    <origin xyz="-0.2 0 0.135" rpy="0 0 3.14"/>
    <parent link="base_link"/>
    <child link="hokuyo_link"/>
  </joint>



  <!-- link1 -->
  <link name="link1">
   <inertial>
     <origin xyz="0 0 0" rpy="0 0 0"/>
     <mass value="1.5"/>
     <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
   </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
      <material name="gray"/>
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder length="0.02" radius="0.02"/>
      </geometry>
    </collision>
  </link>

  <!-- base_to_link1 -->
  <joint name="base_to_link1" type="revolute">
	<safety_controller k_position="100.0" k_velocity="40.0" soft_lower_limit="-1.57" soft_upper_limit="1.396"/>
    <origin xyz="-0.105 0 0.14" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="link1"/>
    <axis xyz="0 0 1"/>
    <limit effort="0.245166" lower="-1.57" upper="1.396" velocity="0.5"/>
  </joint>

  <!-- for_link2 -->
  <link name="for_link2">
    <inertial>
      <mass value="1e-5" />
      <origin xyz="-0.02 -0.015 0.035" rpy="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>

    <visual>
      <origin xyz="-0.02 -0.015 0.035" rpy="0 0 0"/>
      <geometry>
        <box size="0.07 0.005 0.05"/>
      </geometry>
      <material name="gray"/>
    </visual>

    <collision>
      <origin xyz="-0.02 -0.015 0.035" rpy="0 0 0"/>
      <geometry>
        <box size="0.07 0.005 0.05"/>
      </geometry>
    </collision>
  </link>

  <!-- link1_to_for_link2 -->  
  <joint name="link1_to_for_link2" type="fixed">
    <parent link="link1"/>
    <child link="for_link2"/>
  </joint>

  <!-- link2 -->
  <link name="link2">
    <inertial>
      <mass value="1e-5" />
      <origin xyz="0.07 0 0" rpy="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
    <visual>
      <origin xyz="0.07 0 0" rpy="0 0 0"/> 
      <geometry>
        <box size="0.13 0.005 0.03"/> 
      </geometry>
      <material name="gray"/>   
    </visual>

    <collision>
      <origin xyz="0.07 0 0" rpy="0 0 0"/> 
      <geometry>
        <box size="0.13 0.005 0.03"/> 
      </geometry>
    </collision>
  </link>

  <!-- for_link2_to_link2 -->
  <joint name="for_link2_to_link2" type="revolute">
    <safety_controller k_position="100.0" k_velocity="40.0" soft_lower_limit="-3.14" soft_upper_limit="0"/>
    <origin xyz="-0.05 -0.01 0.04" rpy="0 0 0"/>
    <parent link="for_link2"/>
    <child link="link2"/>
    <limit effort="0.245166" lower="-3.14" upper="0" velocity="0.5"/>
    <axis xyz="0 1 0"/>
  </joint>
  
  <!-- link3 -->
  <link name="link3">
    <inertial>
      <mass value="1e-5" />
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/> 
      <geometry>
        <box size="0.035 0.02 0.03"/>
      </geometry> 
      <material name="gray"/>   
    </visual>

    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/> 
      <geometry>
        <box size="0.035 0.02 0.03"/>
      </geometry> 
    </collision>
  </link>

  <!-- link2_to_link3 -->
  <joint name="link2_to_link3" type="revolute">
    <safety_controller k_position="100.0" k_velocity="40.0" soft_lower_limit="0" soft_upper_limit="3.14"/>
    <origin xyz="0.1325 0.013 0.015" rpy="0 0 0"/>
    <parent link="link2"/>
    <child link="link3"/>
    <limit effort="0.245166" lower="0" upper="3.14" velocity="0.5"/>
    <axis xyz="0 1 0"/>
  </joint>

  <!-- link4 -->
  <link name="link4">
    <inertial>
      <mass value="1e-5" />
      <origin xyz="-0.01 0 0" rpy="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>

    <visual>
      <origin xyz="-0.0725 0 0" rpy="0 1.57 0"/> 
      <geometry>
        <cylinder length="0.145" radius="0.008"/>
      </geometry> 
      <material name="light_gray"/>   
    </visual>

    <collision>
      <origin xyz="-0.0725 0 0" rpy="0 1.57 0"/> 
      <geometry>
        <cylinder length="0.145" radius="0.008"/>
      </geometry> 
    </collision>
  </link>


  <!-- link3_to_link4 -->
  <joint name="link3_to_link4" type="revolute">	
    <safety_controller k_position="100.0" k_velocity="40.0" soft_lower_limit="-1.57" soft_upper_limit="1.57"/>
    <origin xyz="-0.01 0 0" rpy="0 0 0"/>
    <parent link="link3"/>
    <child link="link4"/>
    <limit effort="0.245166" lower="-1.57" upper="1.57" velocity="0.5"/>
    <axis xyz="1 0 0"/>
  </joint>


  <!-- imu_block_link -->
  <link name="imu_block_link">
    <collision>
      <origin xyz="-0.0825 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.01 0.005 0.01"/>
      </geometry>
    </collision>

    <visual>
      <origin xyz="-0.0825 0.0105 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.01 0.005 0.01"/>
      </geometry>
      <material name="black"/>
    </visual>

    <inertial>
      <mass value="1e-5" />
      <origin xyz="-0.0825 0 0" rpy="0 0 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
  </link>

  <joint name="imu_block_joint" type="fixed">
    <parent link="link4"/>
    <child link="imu_block_link"/>
  </joint>


  <!-- for_link5_left -->
  <link name="for_link5_left">
    <inertial>
      <mass value="1e-5" />
      <origin xyz="-0.17 -0.008 0" rpy="0 0 0"/> 
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
    </inertial>

    <visual>
      <origin xyz="-0.17 -0.008 0" rpy="0 0 0"/> 
      <geometry>
        <box size="0.055 0.005 0.03"/> 
      </geometry> 
      <material name="gray"/>   
    </visual>

    <collision>
      <origin xyz="-0.17 -0.008 0" rpy="0 0 0"/> 
      <geometry>
        <box size="0.055 0.005 0.03"/> 
      </geometry> 
    </collision>
  </link>

  <!-- link4_to_for_link5_left -->
  <joint name="link4_to_for_link5_left" type="fixed">
    <parent link="link4"/>
    <child link="for_link5_left"/>
  </joint>

  <!-- link5 -->
  <link name="link5">
    <inertial>
      <mass value="1e-5" />
      <origin xyz="-0.015 0 0" rpy="0 1.57 0"/> 
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>

    <visual>
      <origin xyz="-0.015 0 0" rpy="0 1.57 0"/> 
      <geometry>
        <cylinder length="0.02" radius="0.008"/>
      </geometry> 
      <material name="gray"/>   
    </visual>

    <collision>
      <origin xyz="-0.015 0 0" rpy="0 1.57 0"/> 
      <geometry>
        <cylinder length="0.02" radius="0.008"/>
      </geometry> 
    </collision>
  </link>

  <!-- for_link5_left_to_link5 -->
  <joint name="for_link5_left_to_link5" type="revolute">
    <safety_controller k_position="100.0" k_velocity="40.0" soft_lower_limit="-1.57" soft_upper_limit="1.57"/>	
    <origin xyz="-0.1875 0 0" rpy="0 0 0"/>
    <parent link="for_link5_left"/>
    <child link="link5"/>
    <limit effort="0.245166" lower="-1.57" upper="1.57" velocity="0.5"/>
    <axis xyz="0 1 0"/>
  </joint>
  
  
  <!-- GRIPPER -->
    
  <!-- right_finger -->
  <link name="right_finger">
    <inertial>
      <mass value="1e-5" />
      <origin xyz="-0.0275 0.01 0" rpy="0.48539 1.57 0"/> 
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>

    <visual>
      <origin xyz="-0.0275 0.01 0" rpy="0.48539 1.57 0"/> 
      <geometry>
        <box size="0.005 0.005 0.055"/> 
      </geometry> 
      <material name="gray"/>   
    </visual>

    <collision>
      <origin xyz="-0.0275 0.01 0" rpy="0.5 1.57 0"/> 
      <geometry>
        <box size="0.005 0.005 0.055"/> 
      </geometry> 
    </collision>
  </link>

  <!-- link5_to_right_finger -->
  <joint name="link5_to_right_finger" type="revolute">	
    <safety_controller k_position="100.0" k_velocity="40.0" soft_lower_limit="-0.5" soft_upper_limit="0.5"/>
    <origin xyz="-0.02 0.01 0" rpy="0 0 0"/>
    <parent link="link5"/>
    <child link="right_finger"/>
    <limit effort="0.980665" lower="-0.5" upper="0.5" velocity="0.5"/>
    <axis xyz="0 0 1"/>
  </joint>

  <!-- left_finger -->
  <link name="left_finger">
    <inertial>
      <mass value="1e-5" />
      <origin xyz="-0.0275 -0.01 0" rpy="-0.48539 1.57 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>

    <visual>
      <origin xyz="-0.0275 -0.01 0" rpy="-0.48539 1.57 0"/> 
      <geometry>
        <box size="0.005 0.005 0.055"/> 
      </geometry> 
      <material name="gray"/>   
    </visual>

    <collision>
      <origin xyz="-0.0275 -0.01 0" rpy="-0.48539 1.57 0"/> 
      <geometry>
        <box size="0.005 0.005 0.055"/> 
      </geometry> 
    </collision>
  </link>

  <!-- link5_to_left_finger -->
  <joint name="link5_to_left_finger" type="revolute">
    <safety_controller k_position="100.0" k_velocity="40.0" soft_lower_limit="-0.5" soft_upper_limit="0.5"/>
    <origin xyz="-0.02 -0.01 0" rpy="0 0 0"/>
    <parent link="link5"/>
    <child link="left_finger"/>
    <limit effort="0.980665" lower="-0.5" upper="0.5" velocity="0.5"/>
    <axis xyz="0 0 1"/>
  </joint>

  <!-- right_tip -->
  <link name="right_tip">
    <inertial>
      <mass value="1e-5" />
      <origin xyz="-0.0445 0.016 0" rpy="0.48539 1.57 0"/> 
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>
   
    <visual>
      <origin xyz="-0.0445 0.016 0" rpy="0.48539 1.57 0"/> 
      <geometry>
        <box size="0.005 0.005 0.018"/> 
      </geometry> 
      <material name="gray"/>   
    </visual>

    <collision>
      <origin xyz="-0.0445 0.016 0" rpy="0.48539 1.57 0"/> 
      <geometry>
        <box size="0.005 0.005 0.018"/> 
      </geometry> 
    </collision>
  </link>

  <!-- right_finger_to_right_tip -->
  <joint name="right_finger_to_right_tip" type="fixed">
    <parent link="right_finger"/>
    <child link="right_tip"/>
  </joint>

  <!-- left_tip -->
  <link name="left_tip">
    <inertial>
      <mass value="1e-5" />
      <origin xyz="-0.0445 -0.016 0" rpy="-0.48539 1.57 0"/>
      <inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
    </inertial>

    <visual>
      <origin xyz="-0.0445 -0.016 0" rpy="-0.48539 1.57 0"/> 
      <geometry>
        <box size="0.005 0.005 0.018"/> 
      </geometry> 
      <material name="gray"/>   
    </visual>

    <collision>
      <origin xyz="-0.0445 -0.016 0" rpy="-0.48539 1.57 0"/> 
      <geometry>
        <box size="0.005 0.005 0.018"/> 
      </geometry> 
    </collision>
  </link>

  <!-- left_finger_to_left_tip -->
  <joint name="left_finger_to_left_tip" type="fixed">
    <parent link="left_finger"/>
    <child link="left_tip"/>
  </joint>

</robot>


